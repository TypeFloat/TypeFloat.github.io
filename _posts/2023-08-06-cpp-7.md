---
title: C++ —— VOL.7 数组与字符串
tags: C++
key: C++-7
sidebar:
  nav: c++
---

本节主要介绍了C++中的数组和字符串。<!--more-->

# 写在前面

这篇笔记是根据国外的大佬录制的教学视频进行整理的，[视频戳这儿](https://www.youtube.com/watch?v=18c3MTX0PK0&list=PLlrATfBNZ98dudnM48yfGUldqGD0S4FFb)，B站也有中文的搬运，[视频戳这儿](https://www.bilibili.com/video/BV1N24y1B7nQ?p=2&vd_source=0307132b97183cff4ff2138cf704f827)。这篇笔记中很多语言相通的概念介绍的非常简单，因此该笔记可能更适合已经学过某一门编程语言的C++初学者。

本节介绍C语言和C++在数组和字符串上的区别，对其各自的内部细节不做过多介绍。

# 数组

## 原生数组

原生数组，也就是C风格数组。例如，`int a[5]`，其中`a`是一个数组，数组中有5个元素，每个元素的类型都是`int`。C风格数组也可以容纳各种类型的数据，但不能是引用类型。C风格数组是一种不可变大小的数据结构，一旦创建，其大小就不能改变。上述声明的数组`a`，其本质是一片连续的存储空间，数组名`a`就是这片存储空间的首地址。数组的下标从0开始，因此`a[0]`是数组的第一个元素，`a[4]`是数组的最后一个元素。数组的下标不能超过数组的大小，否则会出现数组越界的错误。所以操作一个C风格数组，其本质就是指针的运算，只不过重载了`[]`运算符，因此可以进行下标运算。这里不对C风格数组作过多介绍。

## vector

vector是C++引入的一种类模版，本质不是一种数据类型。当实例化后才是一种数据类型，例如`vector<int>`。相比于C风格数组，其优势在于可以动态改变大小。vector的底层实现是一个动态数组，其本质是一个连续的存储空间，当存储空间不够时，会自动扩容。vector的操作和C风格数组类似，但是vector提供了很多方便的方法，例如`push_back()`，`pop_back()`，`insert()`，`erase()`等等。vector的底层实现是一个动态数组，其本质是一个连续的存储空间，当存储空间不够时，会自动扩容。vector的操作和C风格数组类似，但是vector提供了很多方便的方法，例如`push_back()`，`pop_back()`，`insert()`，`erase()`等等。

理论来讲，在定义容器的时候就声明`vector`的大小应当会带来更好的性能，但在实际中，动态地增加`vector`的大小性能更佳。

# 字符串

## C风格字符串

C风格字符串本质是字符数组，所以与数组的操作基本无异。特殊的是，C风格字符串需要以`\0`结尾。C语言提供了一些字符串操作的函数，例如`strlen()`，`strcmp()`，`strcat()`，`strcpy()`等等，它们内部依赖于空字符`\0`作为数组的边界。因此，C风格字符串的末尾必须添加空字符`\0`，否则会出现错误。

## C++风格字符串

`string`类型是C++引入的一种用于存储字符串的数据类型，它提供了很多类似于容器的操作，例如下标运算、`empty()`等函数，以及迭代器功能，与C风格字符串不同，其末尾不需要添加空字符。

在这里额外注意一点，无论是vector还是string，C++都提供了下标运算，但大多数编译器并没有对下标运算进行越界检查，因此在使用下标运算时，一定要注意下标的范围，否则可能会出现缓冲区溢出的错误。

## 字符串字面量

字符串字面量即用双引号包裹的字符串，例如`"Hello World"`。字符串字面量的类型是`const char*`，因此不能修改字符串字面量的内容。字符串字面量的本质是一个字符数组，其最后一个元素是空字符`\0`，因此字符串字面量的大小是字符串的长度加1。为了使C++兼容C风格字符串，string类型的对象可以使用字符串字面量进行初始化，在初始化时，将自动去掉尾部的空字符。

`string s = "Hello " + "world"`，虽然string类型可以使用字符串字面量进行初始化，但是上述的初始化是错误的，因为字符串字面量的类型是`const char*`，而这种数据类型并没有定义`+`运算符，因此，进行相加运算的两个字符串至少一个是`string`类型。