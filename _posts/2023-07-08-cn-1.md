---
title: 计算机网络 —— VOL.1 概述
tags: "计算机网络"
key: cn-1
sidebar:
  nav: cn
---

本系列是计算机网络学习的记录笔记，参考了中科大郑老师在B站上发布的[教学视频](https://www.bilibili.com/video/BV1JV411t7ow/)。文章主要介绍计算机网络的概述。<!--more-->

# 什么是Internet

网络由节点和边构成，在计算机网络中，节点是计算机及其运行的应用程序（主机节点）和路由器、交换机等网络交换设备（数据交换节点），边是连接主机节点与数据交换节点的链路。特殊的是，计算机网络还包含了数据传输需要使用的协议。以TCP/IP协议簇作为协议的计算机网络称为Internet。

协议指的是在网络传输的各个层之间，对等层的实体在通讯过程中遵循的规则集合。协议定义了在两个或多个通信实体之间交换的报文格式和次序，以及报文发送和/或接收一条报文或其他事件所采取的动作。

互联网的结构可以按照以下方式进行分类：
- 网络边缘
  - 主机
  - 应用程序
- 网络核心
  - 互联的路由器
  - 网络的网络
- 接入网、物理媒体
  - 有线或无线通信链路

# 网络边缘

网络边缘指的是在“网络的边缘”运行的应用程序。

边缘设备之间的通信从主从模式上区分有两种模式：C/S模式和P2P模式。C/S模式指的是客户/服务器模式，由客户端向服务器请求、接受服务，例如Web服务器/浏览器、Email服务器/客户端。P2P模式指的是对等模式，这种模式很少甚至没有专门的服务器，而是由对等的节点互相提供服务，例如迅雷下载器。

从采用的通讯协议来分，应用程序有基于TCP协议和基于UDP协议的两种。TCP协议是面向连接的服务，这是一种可靠的、按顺序传送数据的模式，TCP协议会进行流量控制与拥塞控制，常见的服务有HTTP、FTP、Telnet、SMTP。UDP协议是面向无连接的服务，这种模式不保证数据的可靠传输，也不保证数据的按顺序传输，UDP协议不进行流量控制与拥塞控制，常见的服务有流媒体、DNS。

# 网络核心

网络核心指的是网络的网络，是由路由器和链路构成的网络。

网络核心的基本问题是数据如何通过网络进行传输，主要有电路交换和分组交换两种方式。

## 电路交换

电路交换是一种端到端的连接方式，建立连接的过程称为呼叫，通信双方会独享资源，这种方式的优点是可以保证带宽、保证性能，缺点是资源利用率低（这是因为，通信双方即使不发送任何数据，依然会占据相应的网络资源），通常被传统电话网络采用。

在进行电路交换时，网络资源（如带宽）会被分片，为呼叫进行分配，分片的方法有频分、时分、波分、码分。

电路交换不适合计算机之间的通信，因为连接建立时间长，且计算机之间的通信有突发性，如果使用线路交换，则浪费的资源片较多。

## 分组交换

分组交换是一种存储转发的方式，网络资源不再分片，传输时使用全部带宽，主机之间传输的数据被分为一个个的分组，在分组时采用统计多路复用的模式。这种方式是资源共享、按需使用的。

对于分组交换的方式，网络核心的关键功能是路由和转发。路由决定分组采用的源到目标的路径，转发将分组从路由器的输入链路转移到输出链路。在转发时，分组每次移动一跳。在转发之前，节点必须收到整个分组，因此延迟比线路交换要大，排队时间长。另一个问题是，由于需要对分组进行存储，如果路由器的缓存用尽，则会丢弃即将到来的分组。

同样的网络资源下，相比电路交换，分组交换允许更多用户使用网络。分组交换适用于突发式数据传输， 过度使用会造成网络拥塞，在传输可靠要求高的数据时，需要使用协议进行拥塞控制。

分组交换按照有无网络层连接，分为数据包网络和虚电路网络。数据包网络在发送的数据包中，包含了目标地址，每个分组具有独立的路由（路由路径不一样，可能导致分组失序），因此源主机和目标主机是独立的，不需要建立连接。虚电路网络需要源主机和目标主机建立先呼叫建立连接，在发送的数据包中带有虚电路标识，决定下一跳的目标，由路由器维护每个呼叫的状态信息。

# 接入网和物理媒体

按照使用场景的角度，端系统和边缘路由的连接主要有：住宅接入、单位接入和无线接入。

## 住宅接入

住宅接入的第一种方式是调制解调器（modem）。该方式是将上网数据调制加载到音频信号上（加载方式有调频、调幅、调相位、总和调制），在电话线上进行传输，再在局端将其中的数据调解出来。由于使用的是电话线进行传输，因此带宽很窄，且不能同时上网和打电话。

住宅接入的第二种方式是数字用户线（DSL），采用现存的交换局DSLAM的电话线，将DSL线路上的数据传到互联网、DSL线路上的语音被传到电话网。与调制解调器的区别是该种方式不独占电话线，因此需要在带宽较大的情况下使用。

住宅接入的第三种方式是线缆网络。这种方式将原有的有线电视信号线缆进行非对称的双向改造（下行传输速率远大于上行传输速率），线缆和光纤网络将家庭用户接入到ISP路由器。

## 单位接入

企业和大学等机构大多采用以太网交换机级联的方式接入互联网。

## 无线接入

各无线端系统通过无线路由器共享无线接入网络，主要有无线LANs和广域无线接入（由电信运营商提供）。

# Internet结构和ISP

互联网的结构是网络的网路。端系统接入局部ISP（Internet Service Provider），多个局部ISP再介入全球ISP，由此连接成互联网。

![](/assets/posts/cn-1-1.jpg)

ISP的之间的连接有若干种方式：

- POP：高层ISP面向客户网络的接入点；
- 对等接入：两个ISP对等互接；
- IXP：多个ISP互联互通，也是一种对等接入；
- 内容服务提供商部署专用网络，同时和各级ISP相连。

# 分组延时、丢失和吞吐量

分组延时主要包括四部分：节点处理延时（检查分组信息）、排队延时（等待被传输的时间，依赖于路由器的拥塞程度）、传输延时（将分组发送到链路上的时间）、传播延时（分组在链路上传输的时间）。

链路的队列缓冲区容量有限，当分组到达一个满的队列时，该分组将会丢失。丢失的分组可能会被前一个节点或源端系统重传，也可能不重传。

吞吐量指的是源端和目标端之间传输的速率（数据量/单位时间），分为瞬间吞吐量和平均吞吐量。端到端的路径上，吞吐量取决于瓶颈链路（吞吐量最小的某一段链路）。

# 协议层次及其服务模型

## 协议层次

协议是对等实体之间在相互通信的过程中，需要遵循的规则的集合，计算机网络通过层次化方法实现复杂网络功能：

- 将网络复杂的功能分成功能明确的层次，每一层实现了其中一个或一组功能，功能中有其上层可以使用的功能，即服务；
- 本层协议实体相互交互执行本层的协议动作，目的是实现本层功能，通过接口为上层提供更好的服务；
- 在本层协议实现时，直接利用了下层所提供的服务。

这样做的好处是：

- 概念化：结构清晰，便于标示网络组件，以及描述相互关系；
- 结构化：模块化，更易于维护和系统升级，对于某一层服务的实现不影响系统中的其他层次。

## 服务模型

服务指的是低层实体向上层实体提供他们之间通信的能力，服务提供者通过服务访问点来区分不同的服务用户，低层实体向上层实体提供服务是通过服务访问原语实现的。

服务的类型分为面向连接的服务和无连接的服务。

面向连接的服务，如应用层的TCP协议和网络层的虚电路，这种服务需要两个通信实体先建立连接，待通信结束后再拆除连接。适用于传输大量数据，特点是保序的，可靠性高。

面向无连接的服务，如应用层的UDP协议和网络层的数据包网络，这种服务不需要两个通信实体建立连接，不预留资源，不需要通信双方活跃。其特点是不能可靠、可能重复、可能失序，适用于传输零星数据。

## 服务与协议的区别联系

服务是垂直方向上的，协议是水平方向上的。本层协议的实现要靠下层提供的服务来实现，本层实体通过协议为上层提供更高级的服务。

![](/assets/posts/cn-1-2.jpg)

## Internet协议栈

协议层次共分为五层，由上到下依次为：

- 应用层：为应用进程提供网络应用服务，数据以报文为单位进行传输，例如FTP、SMTP、HTTP、DNS；
- 传输层：进程到进程的数据传输，在该层将不可靠的通信变成可靠的通信，数据以报文段为单位进行传输，例如TCP、UDP；
- 网络层：源主机到目标主机的端到端的通信，不可靠，数据以分组或数据报为单位进行传输，例如IP协议、路由协议；
- 链路层：相邻网络节点间的数据传输，是一种点到点的通信，可靠或不可靠，数据以数据帧为单位进行传输，例如wifi、Ethernet；
- 物理层：在物理线路上以bit为单位传输数据。

在ISO/OSI参考模型中，在传输层之上，还有会话层和表示层，会话层的功能是数据交换的同步、检查与恢复，表示层的功能是解释传输的数据（加密、压缩、表示转换等）。在互联网协议栈中，由应用层完成会话层和表示层的功能，因此不包含这两层。