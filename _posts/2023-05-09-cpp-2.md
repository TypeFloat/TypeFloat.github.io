---
title: C++学习 —— VOL.2 变量与函数
tags: C++
key: C++-2
---

这是一篇C++的教程，也是我自己的学习笔记，本节主要介绍了C++的变量与函数。即使你已经非常了解变量与函数的概念，建议你阅读本篇笔记的“头文件”部分。<!--more-->

# 写在前面

这篇笔记是根据国外的大佬录制的教学视频进行整理的，[视频戳这儿](https://www.youtube.com/watch?v=18c3MTX0PK0&list=PLlrATfBNZ98dudnM48yfGUldqGD0S4FFb)，B站也有中文的搬运，[视频戳这儿](https://www.bilibili.com/video/BV1N24y1B7nQ?p=2&vd_source=0307132b97183cff4ff2138cf704f827)。这篇笔记中很多语言相通的概念介绍的非常简单，因此该笔记可能更适合已经学过某一门编程语言的C++初学者。

# 变量

在C++中，变量是一种用于存储值的基本程序元素。它们通常被用来表示数据或状态，并且可以在程序中被读取或修改。变量在使用前必须先声明，以便告诉编译器变量的类型和名称。变量类型指定了变量可以存储的数据类型，例如整数、浮点数、布尔值、字符等。

从计算机角度来看，任何的变量都是在内存中开辟了一块空间，用于存储数据，而变量类型决定了这块空间的大小和编译器对这块空间的解释方式。因此，下面的两行语句是完全等价的：

```cpp
char var = 65;
char var = 'A';
```

同样的，当对一个变量进行强制类型转换时，只是改变了这块空间的大小和编译器对这块空间的解释方式，并没有修改空间中的数据。值得注意的是，在强制类型转换时，如果从一个大空间数据类型向小空间数据类型转换，可能会导致数据丢失。

# 函数

函数是一种可重用的代码块，它可以在程序中被多次调用。函数可以接受参数，也可以返回一个值。函数的声明包括函数的名称、返回类型和参数列表，而函数的定义则包括函数的名称、返回类型、参数列表和函数体。

## 头文件

在C++中，每一个cpp文件都是一个编译单元，因此在编译的时候，编译器只会编译当前文件中的代码，而不会编译其他文件中的代码。如果我们在一个cpp文件中调用了另一个cpp文件中的函数，编译器将会报错，因为它并不知道这个函数是什么。因此，我们需要在调用函数的cpp文件中包含函数的声明，这样编译器就知道这个函数是什么了。

在C++中，我们可以使用头文件来包含函数的声明，头文件的后缀名为`.h`，我们可以使用`#include`来包含头文件。如果你已经看过[C++是如何工作的](https://blog.typefloat.cn/2023/05/02/cpp-1.html)，你应该知道`#include`的作用，它实际上就是把头文件的代码粘贴到了这个位置，因此，我们可以把函数的声明写在头文件中，然后在需要调用这个函数的cpp文件中包含这个头文件，这样就可以调用这个函数了。

需要注意的是，除了函数声明，我们一般也将结构体定义在头文件中，此时使用`#include`很容易导致该结构体被多次定义，我们需要在头文件中使用`#ifndef`来避免这种情况。

```cpp
#ifndef STRUCT_H
#define STRUCT_H

// struct definition
# endif
```

上述的条件控制语句的作用是，如果`STRUCT_H`没有被定义，那么就定义它，并且包含`#endif`之前的代码，否则就不包含`#endif`之前的代码。因此，我们可以在头文件中使用这种条件控制语句，这样就可以避免头文件被多次包含。现在的编译器提供了一种更简单的方式来避免头文件被多次包含，我们可以使用`#pragma once`来代替上述的条件控制语句，它的作用是，如果头文件被多次包含，那么只会包含一次。

## c标准库和cpp标准库头文件的区别

c标准库的头文件通常以`.h`结尾，例如`stdlib.h`，为了进行区分，C++的标准库通常不带任何后缀，例如`iostream`。为了更好的兼容C，C++的标准库也提供了标准C的头文件，以`c`开头，例如`cstdlib`，这些头文件中的函数都是在`std`命名空间中的，因此，我们在使用这些头文件中的函数时，需要在函数名前加上`std::`，例如`std::atoi`。