---
title: C++学习 —— VOL.3 指针与引用
tags: C++
key: C++-3
sidebar:
  nav: c++
---

本节主要介绍了C++的指针与引用。这里只介绍了指针和引用的核心概念，并没有非常细致的进行讲解。<!--more-->

# 写在前面

这篇笔记是根据国外的大佬录制的教学视频进行整理的，[视频戳这儿](https://www.youtube.com/watch?v=18c3MTX0PK0&list=PLlrATfBNZ98dudnM48yfGUldqGD0S4FFb)，B站也有中文的搬运，[视频戳这儿](https://www.bilibili.com/video/BV1N24y1B7nQ?p=2&vd_source=0307132b97183cff4ff2138cf704f827)。这篇笔记中很多语言相通的概念介绍的非常简单，因此该笔记可能更适合已经学过某一门编程语言的C++初学者。

# 指针

## 指针的本质

很多C/C++的初学者会将指针的概念想的非常复杂，其实指针的概念非常简单，指针就是一个整形变量，它存储的是一个地址，这个地址是表示系统内存地址的数字。更进一步说，指针存储的是一块内存空间的起始地址。

指针的大小与编译器有关，编译器中内存地址用多少空间进行表示，指针的大小就是多少。一般来说，32位的编译器中，指针的大小为4字节，64位的编译器中，指针的大小为8字节。

## 指针的类型

无论指针是什么类型，指针本质都是一个整形变量。上面说到，指针存储的是一块内存空间的起始地址，因此指针的类型表示指针指向的内存空间的大小，也就是通过指针类型来告诉编译器该如何使用该起始地址。

## 取地址

想要获取一个变量的地址可以使用取地址运算符`&`，特别注意，无论它占据了多大的内存空间，取地址运算符获取的是该变量内存空间的首地址，因为编译器保证一个基本变量的内存空间是连续的。

## 解引用

如果想通过指针对其指向的内存空间进行操作，可以使用解引用运算符`*`，例如：

```cpp
int a = 0;
int *ptr = &a;
*ptr = 1;
```

上述代码中的第一个`*`为指针声明符，表明`ptr`是一个指向整形变量的指针；第二个`*`为解引用运算符，可以将`ptr`指向的内存空间的值修改为`1`，即将`a`的值修改为1。

# 引用

引用本质上是指针的一种语法糖，只不过编译器会自动帮我们进行取地址和解引用的操作。

## 变量别名

很多C++的教程中提到引用的作用之一是变量别名，例如：
```cpp
int a = 1;
int &b = a;
b = 10;
```

运行上述代码会发现，`a`的值被改变为了10，因为`b`和`a`指向的是同一块内存空间，因此可以说`b`是`a`的一个别称。从本质上来讲，下面的代码与上述代码等价：
```cpp
int a = 1;
int *b = &a;
*b = 10;
```

所以请记住，引用只是指针的一种语法糖。

## 引用作为函数参数

引用可以用作函数参数，这样可以在函数内部直接操作传递进来的变量，而不需要对传递进来的变量进行复制。这可以提高程序的性能，并减少内存使用。例如：

```cpp
void func(int& x) {
    x = x + 1;
}

int main() {
    int a = 10;
    func(a);
    std::cout << a << std::endl; // 输出 11
    return 0;
}
```

上述代码在调用函数时，实际上传递的是变量`a`的地址，而不是对`a`进行复制，因此在函数内部对变量进行的操作会影响到函数外部的变量。

## 总结

这里只是简单介绍了引用的两种用法，引用还可以用于很多场景，例如函数返回值、容器变量等，但本质是一样的，都是对指针的一种简化使用，通过传递内存地址以减少变量的复制，从而减少内存的使用并提高程序的性能。