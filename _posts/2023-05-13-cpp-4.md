---
title: C++ —— VOL.4 static关键字
tags: C++
key: C++-4
sidebar:
  nav: c++
---

本节主要介绍了C++中static关键字的使用。<!--more-->

# 写在前面

这篇笔记是根据国外的大佬录制的教学视频进行整理的，[视频戳这儿](https://www.youtube.com/watch?v=18c3MTX0PK0&list=PLlrATfBNZ98dudnM48yfGUldqGD0S4FFb)，B站也有中文的搬运，[视频戳这儿](https://www.bilibili.com/video/BV1N24y1B7nQ?p=2&vd_source=0307132b97183cff4ff2138cf704f827)。这篇笔记中很多语言相通的概念介绍的非常简单，因此该笔记可能更适合已经学过某一门编程语言的C++初学者。

# static

## 全局作用域的static

在全局作用域中声明一个变量或函数时，使用`static`关键字可以使它们仅在当前文件（即C++编译时的最小编译单元）中可见，也就是说，它们具有文件作用域。这种使用`static`关键字的方式被称为全局作用域`static`。

例如，当在一个C++源文件中声明一个全局变量或函数时，该变量或函数默认情况下可以被其他源文件中的代码访问。但是，如果在这些变量或函数的声明前加上`static`关键字，它们就只能在当前源文件中使用，而不能在其他源文件中使用。

## 局部作用域的static

`static`关键字还可以用于局部作用域的变量中，例如函数作用域和类作用域，这种方式被称为局部作用域`static`。

当在函数中声明一个变量时，该变量默认情况下是一个自动变量，这种变量被存储在栈内存中，即只在函数调用期间存在，在函数返回时被销毁。如果在变量声明前加上`static`关键字，则该变量的生存期会延长到整个程序的运行期间，并且其作用域仅限于当前函数内部。每次调用该函数时，该变量的值都会保持上一次调用结束时的值，这就意味着，变量的定义只会在第一次调用函数时执行，而不会在后续调用中执行。

如果在类体中声明一个变量时，该变量默认情况下是一个非静态数据成员，这种变量被存储在对象中，即每个对象都有自己的一份数据成员。如果在变量声明前加上`static`关键字，则该变量的生存期会延长到整个程序的运行期间，并且其作用域仅限于当前类内部。这种变量被称为静态数据成员，它不属于任何对象，而是属于整个类，即所有对象共享同一份数据成员。可以通过类名加作用域解析运算符(`::`)来访问类的静态成员变量。